experiment:
  name: criteo_fwfm_bspline_quantilecap_large_token
  variant: bspline_integer_basis

model:
  integer:
    bspline:
      # B-spline basis is only used for x in [1, cap_value]. Non-positives are discrete.
      cap_max: 10000000
      cap_mode: quantile
      cap_quantile: 0.99
      cap_quantile_factor: 1.1
      positive_overflow: large_token

      # Continuous input mapping for the curve (x -> scalar in [out_min, out_max]).
      input_map: log1p_cap_to_unit
      out_min: -1.0
      out_max: 1.0

      # torchcurves BSplineCurve params.
      normalize_fn: clamp
      normalization_scale: 1.0
      degree: 3
      knots_config: 16
