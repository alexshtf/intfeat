experiment:
  name: criteo_fwfm_hybrid_bspline_qcap_large_token_sl_i5
  variant: hybrid_bspline_sl

model:
  integer:
    hybrid:
      # Only this integer column uses the SL basis; all other integer columns use B-splines.
      sl_columns: [I5]

    # Baseline integer basis = B-splines, with quantile-based cap and a per-column LARGE overflow token.
    bspline:
      cap_max: 10000000
      cap_mode: quantile
      cap_quantile: 0.99
      cap_quantile_factor: 1.1
      positive_overflow: large_token

      input_map: log1p_cap_to_unit
      out_min: -1.0
      out_max: 1.0

      normalize_fn: clamp
      normalization_scale: 1.0
      degree: 3
      knots_config: 10

    # SL settings apply to I5 only (since hybrid.sl_columns=[I5]).
    # We still use the same quantile-based cap and LARGE overflow token.
    sl:
      cap_max: 10000000
      cap_mode: quantile
      positive_overflow: large_token
      hist:
        cutoff_quantile: 0.99
        cutoff_factor: 1.1
